<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>C&W Story Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='ccp.ico') }}">
    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>

<script>
function handleCredentialResponse(response) {
    // Redirect to your Flask login route with a GET parameter
    window.location.href = "{{ url_for('google_login', _external=True) }}?credential=" + response.credential;
}
</script>

    <!-- Page Header -->
    <div style="display: flex; justify-content: center; align-items: center; margin-top: 40px;">
        <h1 style="display: inline;">
            <a href="https://www.ccpstudentnews.org" 
               style="font-family: 'Brush Script MT'; text-decoration: none; color: #222; font-size: 45px;">
               Cardinal and White&nbsp;
            </a>
        </h1>
        <h1 style="display: inline;">Story Tracker</h1>
    </div>

    <!-- Login Section -->
    <div style="display: flex; justify-content: center; margin-top: 50px;">
        <!-- Google Sign-In Button -->
<div id="g_id_onload"
     data-client_id="{{ google_client_id }}"
     data-login_uri="{{ url_for('google_login', _external=True) }}"
     data-auto_prompt="false"
     data-callback="handleCredentialResponse">
</div>


        <div class="g_id_signin"
             data-type="standard"
             data-size="medium"
             data-theme="outline"
             data-text="sign_in_with"
             data-shape="rectangular"
             data-logo_alignment="left">
        </div>
    </div>

    <!-- Optional Info Text -->
    <p style="text-align: center; margin-top: 20px; font-size: 1rem; color: #555;">
        Please sign in with your Chaminade Google account to access the Story Tracker.
    </p>

    <!-- Flash messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div style="text-align: center; margin-top: 20px;">
      {% for category, message in messages %}
        <p style="color: red; font-weight: bold;">{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}


</body>
</html>
